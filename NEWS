TODOs in approximate order of importance (higher is more important).

BUG: Too many legend entries for the WorldBank viz --- git bisect
figured out that the bug was introduced in this change
https://github.com/tdhock/animint/commit/069c167117c169dea9277608e8a0cbed3c75fcff

OUTPUT: Test SVG output after applying JavaScript? Is there some way
we can apply the JavaScript non-interactively and then check the
results?  Need to figure out which one(s) of these libraries could do
the job: http://phantomjs.org/ http://www.omegahat.org/SpiderMonkey/
https://github.com/tmpvar/jsdom/blob/master/README.md After we figure
out what testing framework is best, use it to implement the
animint2HTML function used in some of the inst/tests/test-*.R files.

customizable alpha/color/size/fill/linetype for selected geoms, using
selected.alpha, selected.color, etc aesthetics, see
examples/Climate-selected.R. The first implementation should only
allow this at the geom level,
e.g. geom_point(aes(clickSelects=var),selected.color="red") means to
plot a bunch of points which are black if not selected and red if
selected. In ggplot2-0.9.3.1, selected.color thus defined can be
accessed as layer$stat_params$selected.color. In the future we can try
an implementation at the aes level,
e.g. geom_point(aes(clickSelects=var1,selected.color=var2)) means
black if not selected and scale[var2] if selected. NOTE: should
maintain compatibility with existing code, which assumes
selected.color="black" and color="transparent" for
e.g. geom_rect(aes(fill=numeric, clickSelects=id)) and otherwise,
selected.alpha=1 and alpha=1/2.

Why does it take so much memory to compile large data? e.g.
examples/vervet.R.

Profile gg2animint() to see what part is slow, and speed it up!

Is it possible to download gzipped tsv files in JavaScript/D3?

Custom titles for the generated HTML page.

facets -- would be useful when we want to align axes in related plots,
e.g. the last plot of examples/intreg.R. To implement facets it may be
useful to use "margin convention" http://bl.ocks.org/mbostock/3019563

coord_equal -- would be useful for maps e.g. examples/Tornadoes.R.

Legends can be interactive: clicking a legend entry shows/hides that
subset of data. For example, when we say aes(color=variable), this
should imply aes(showSelectedColor=variable) on that geom, and
selection=list(variable="multiple") on that plot.

For each selector variable, render a widget for selecting values:
- single selection variable: <select> or <input type="radio">
- multiple selection categorical variable: <input type="checkbox">
- multiple selection numeric/datetime variable: crossfilter.js
http://square.github.io/crossfilter/

Allow other variable names for the same selection variable,
e.g. insert and insert.show are 2 different columns in
data=other.inserts, but they should both use the "insert" selection
variable, in geom_point(aes(clickSelects=insert,
showSelected=insert.show, data=other.inserts).

Download progress table at the bottom of the plot.
- click a button to show or hide the entire table.
- starts shown, hides itself when everything is loaded.

OPTION: after clicking and changing the displayed data subset,
zoom/update the axes of related plots. For animations we clearly want
to keep the same axes across animation frames, but for some other
kinds of plots it would be nice if the axes automatically zoomed. Make
this an option list axesZoom=list(scatter=c("x", "y"), timeSeries="x")
means that the x axis should be updated for timeSeries and both axes
should be updated for scatter, but the axes are NOT updated for any
other plots. There should also be a button next to each axis that you
can click to toggle zooming on and off.

It would be nice to be able to resize plots interactively, like we can
do in shiny+ggvis.

multiple selection! currently, each interaction variable can only have
a single selected value at a time, e.g. year=1996 and country=Japan in
the WorldBank viz. In the future, we should be able to declare each
interaction variable as either single or multiple selection using an
option list: selection=list(year="single", country="multiple"). If
this option list is not specified, the compiler should infer a
default: multiple selection for interaction variables with only
clickSelects and no showSelected elements (like country in the
WorldBank viz), and single selection for interaction variables with
showSelected elements (like year in the WorldBank viz). The interface
to multiple selection should be simple: click a country to toggle the
selection state from off to on.

theme(legend.position)

specify scale_x_continuous(LABEL) instead of xlab(LABEL).

aes(tooltip=text) for specifying the text to show when you hover the
mouse over something, e.g. issue #1.

layout=matrix of plot names means render plots in an html table
instead of in a line.

specify id or key variable for transitions? In the current set of
examples, using keys has proven un-necessary. So let's just ignore
this for now.  http://bost.ocks.org/mike/constancy/

OUTPUT: animint2dir(L) is the same as gg2animint, but with a name that
is consistent with the other functions below.

OUTPUT: animint2gist(L) uploads animint as a gist to github. Need to have a
flat filesystem structure, with no sub-directories?

OUTPUT: animint2knitr(L) may be used SEVERAL times to include d3
plots directly in knitr html output e.g.
http://zvfak.blogspot.jp/2013/08/using-javascript-visualization.html
Every animint should be saved in its own sub-directory, to avoid
filename conflicts, e.g. plot.json.

OUTPUT: animint2shiny(ggList) renders the interactive animation as a shiny
app, e.g.
https://github.com/tdhock/interactive-tutorial/tree/master/animation/WorldBank

Is it possible to fix geom_rect and geom_text alignment? The
underlying problem is that there is no equivalent of R's vjust in SVG
(the equivalent of R's hjust=0.5|1|0 is CSS text-anchor:
middle|end|start). See examples/align_rect_text.R.

theme(animint.width=600, animint.height=600) instead of option lists
which make us repeat the plot names... this results in an error with
ggplot2-0.9.3.1, is there any work-around or do we need to just
continue to use option lists? maybe we can implement a custom theme()
function? Another solution is for ggplot2 to accept non-standard
options, so I posted an issue
https://github.com/hadley/ggplot2/issues/938

2014.4.7

BUGFIX: make_text now works even if it appears before/after certain
other data. See examples/make_text_bug.R

The default/first selection can be specified by an option
first=list(year=1960, country=c("Japan", "United States"). Stop with
an error if multiple values are specified for a single selection
variable.

BUGFIX: Animation now works even for non-numeric variables,
e.g. examples/canada-cities.R.

For animations, start downloading the next chunk for that geom, until
all data is loaded, even if it is not needed on screen right now.

For large data sets such as the scaffold data, breaking the CSV
database from 21 to 94032 CSV files resulted in a 10x increase
in disk space usage (but faster loading of the first data subset),
for 653018 rows of data. Forcing max 1 chunk variable means only
18045 CSV files which is more space/time efficient. Also, plot.json
only stores the chunk ids, not the full filenames (less repetition).
thocking@silene:~/projects/scaffold-viz$ ls boxes-nochunks|grep csv|wc -l
21
thocking@silene:~/projects/scaffold-viz$ ls boxes-fewer-chunks|grep tsv|wc -l
18045
thocking@silene:~/projects/scaffold-viz$ ls boxes-chunks|grep tsv|wc -l
94032
thocking@silene:~/projects/scaffold-viz$ du -hs boxes-*chunks
45M	boxes-nochunks
99M	boxes-fewer-chunks
400M	boxes-chunks
I uploaded these visualizations and timed page loading in chromium:
http://cbio.ensmp.fr/~thocking/scaffold-viz5/ 44.1MB transferred 27.95 s
transfers ALL the data. slow part is 3 csv files, each around 13 MB.
http://cbio.ensmp.fr/~thocking/boxes-fewer-chunks/
transfers only the first subset. 5.6MB transferred 7.73 s.
plot.json is only 304KB, slow part is 1.6MB geom7_point_box_chunk1057.tsv.
http://cbio.ensmp.fr/~thocking/boxes-chunks/ 12.1MB transferred 9.61 s
transfers only the first subset. slow part is 8.7MB plot.json.

2014.4.4

Download progress table at the bottom of the plot.
- row for every geom.
- columns: geom, selected chunk, status, downloaded, total.

BUGFIX: stop with an error if width or height list contains plot names
that do not exist!

BUGFIX: when there are commas in text labels, animint.js now parses
the data correctly, since we use tsv instead of csv. See
examples/align_rect_text.R.

Speedy web page loading: on compile, divide data into chunks ---
separate csv files. In general a chunk of data will be shown onscreen
at the same time, but we should not make chunks with only 1 row
e.g. for the WorldBank viz, geom_points should have 1 chunk per year,
geom_text country labels should have 1 chunk per country, and
geom_text year labels should have just 1 chunk which covers all
years. On page load, start downloading the first chunk for each geom.

2014.3.19

For geoms with fill=a numeric variable, changing the opacity changes
how we interpret the colors, so for these geoms, show selection by
changing the stroke instead.

2014.3.13

scale_size_animint

2014.2.24

vervet data.

2014.01.27

allow specifying guide="none" in ggplot2 scales that would generate a
legend.

2013.11.22

Test for warnings.

Warn when 0-sized geoms are produced, since they will be invisible.

Do not sort NULL during check for animation values, to avoid warning.

2013.11.19

draw colored, sized "a" in legend for geom_text.

geom_text(aes(size)) is resized using e.g. <text font-size="10">

2013.11.15

Bugfix: filter NaN before passing data to lineThing to avoid hiding an
entire line if only one element is NA.

2013.10.23

Include 1 animint in a knitr Rmd document when processed in the same
directory.

Generate documentation example web site.

Bugfix for geom_point(colour=constant).

2013.10.15

Hide only y axis and not x axis if axis.text.y=element_blank(), etc.

2013.10.4

Bugfixes for geom_ribbon(aes(fill=variable)) and
geom_text(aes(color=variable)).

2013.9.26

Update R/JS comments from emails to Susan.

gg2animint examples are animated and interactive.

2013.8.29
Implementation of geom_hex with relevant examples and documentation.

2013.8.15
Updated package requirements (MASS, reshape2, maps)
Updated documentation to include warnings about using google chrome with animint


2013.7.29
Fix for significant digits issue with clickSelects - fixed by exporting 
as character into JSON file, then importing and converting to numerals.

Axes can now be removed for maps

2013.7.26

bugfix for animations: before, we assumed that the animation variable
takes values in 1..n, but now this is treated properly by looking at
the actual values.

make_text for quick labels.

make_*(data, ...)

WARNING when stat_bin is used to put several clickSelects or
showSelected values in the same bin!

